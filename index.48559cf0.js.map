{"mappings":"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","sources":["src/js/home-trends.js"],"sourcesContent":["const API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\nconst BASE_URL = 'https://api.themoviedb.org/3/trending/movie/week';\nconst TABLET_WIDTH_THRESHOLD = 768;\nconst colWidthClass = 'col-md-4';\n\nconst container = document.querySelector('#movies-container');\n\nasync function fetchTrendsMovies() {\n  try {\n    const response = await fetch(\n      `${BASE_URL}?api_key=${API_KEY}&language=en-US&page=1`\n    );\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    const { results: movieData } = await response.json();\n    return movieData;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function getGenresById(genreIds) {\n  const response = await fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}&language=en-US`\n  );\n  const { genres } = await response.json();\n  return genreIds\n    .map(genreId => genres.find(genre => genre.id === genreId)?.name)\n    .join(', ');\n}\n\n// зірочки\n\nfunction createStarRating(rating) {\n  const starsContainer = document.createElement('div');\n  starsContainer.classList.add('stars-container');\n  const grayStars = document.createElement('div');\n  grayStars.classList.add('st-gray');\n  grayStars.classList.add('flex');\n  grayStars.innerHTML = '⭐⭐⭐⭐⭐';\n  const fullStars = document.createElement('div');\n  fullStars.innerHTML = '⭐⭐⭐⭐⭐';\n  fullStars.classList.add('st');\n  fullStars.classList.add('flex');\n  starsContainer.append(grayStars, fullStars);\n  document.body.appendChild(starsContainer);\n  const height = fullStars.offsetHeight;\n  fullStars.style.width = `${(rating / 2) * height}px`;\n  return starsContainer;\n}\n\nasync function renderMovies(movies, count) {\n  container.innerHTML = '';\n  const moviesContainer = document.createElement('ul');\n  moviesContainer.classList.add('weekly-list');\n  container.appendChild(moviesContainer);\n\n  const movieList = movies.slice(0, count);\n\n  const movieElements = await Promise.all(\n    movieList.map(async movie => {\n      const genres = await getGenresById(movie.genre_ids);\n      const shortenedTitle = movie.title.slice(0, movie.title.indexOf(':'));\n      const releaseYear = movie.release_date.slice(0, 4);\n      const ratingValue = movie.vote_average.toFixed(1);\n\n      const li = document.createElement('li');\n      li.classList.add('weekly-item');\n\n      const wrapper = document.createElement('div');\n      wrapper.classList.add('weekly-wrapper');\n      // Додавання ID для модалки POP UP\n      console.log(movie.id);\n      wrapper.dataset.id = `${movie.id}`;\n      // ++++++++++++++++++++\n\n      const movieDetails = document.createElement('div');\n      movieDetails.classList.add('weekly-info');\n\n      const title = document.createElement('h3');\n      title.classList.add('weekly-info__title');\n      title.innerText = `${shortenedTitle}`;\n\n      const releaseDateAndGenre = document.createElement('span');\n      releaseDateAndGenre.classList.add('weekly-info__genres__data');\n      releaseDateAndGenre.innerText = `${genres\n        .split(',')\n        .slice(0, 1)\n        .join(', ')} | ${releaseYear}`;\n\n      const movieRating = document.createElement('div');\n      movieRating.classList.add('weekly-rating');\n      const ratingValueEl = document.createElement('span');\n      ratingValueEl.innerText = `${ratingValue}`;\n      movieRating.appendChild(ratingValueEl);\n\n      const additionalInfo = document.createElement('div');\n      additionalInfo.classList.add('catalog-list__additional-info');\n      additionalInfo.appendChild(releaseDateAndGenre);\n      additionalInfo.appendChild(createStarRating(ratingValue));\n      additionalInfo.title = ratingValue;\n\n      const poster = document.createElement('img');\n      poster.src = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n      poster.alt = `${movie.title} movie poster`;\n      poster.classList.add('weekly-img');\n      poster.setAttribute('width', '500');\n\n      movieDetails.appendChild(title);\n      movieDetails.appendChild(additionalInfo);\n\n      wrapper.appendChild(movieDetails);\n      li.appendChild(wrapper);\n      li.appendChild(poster);\n\n      return li;\n    })\n  );\n\n  moviesContainer.append(...movieElements);\n}\n\nfunction getFetchedMovies() {\n  const count = window.innerWidth < TABLET_WIDTH_THRESHOLD ? 1 : 3;\n  fetchTrendsMovies().then(movies => renderMovies(movies, count));\n}\n\ngetFetchedMovies();\n\nwindow.addEventListener('resize', getFetchedMovies);\n\n// ===== ВИКЛИК МОДАЛКИ =====\ncontainer.addEventListener('click', onWeeklyTrendsClick);\n\nfunction onWeeklyTrendsClick(e) {  \n  const targetCard = e.target;\n  localStorage.setItem('film-id', `${targetCard.dataset.id}`);\n  console.log(targetCard.dataset.id);\n}\n"],"names":["$d3fe7bef80e36203$var$container","document","querySelector","async","$d3fe7bef80e36203$var$renderMovies","movies","count","innerHTML","moviesContainer","createElement","classList","add","appendChild","movieList","slice","movieElements","Promise","all","map","movie","genres","genreIds","response","fetch","json","genreId","find","genre","id","name","join","$d3fe7bef80e36203$var$getGenresById","genre_ids","shortenedTitle","title","indexOf","releaseYear","release_date","ratingValue","vote_average","toFixed","li","wrapper","console","log","dataset","movieDetails","innerText","releaseDateAndGenre","split","movieRating","ratingValueEl","additionalInfo","rating","starsContainer","grayStars","fullStars","append","body","height","offsetHeight","style","width","$d3fe7bef80e36203$var$createStarRating","poster","src","poster_path","alt","setAttribute","$d3fe7bef80e36203$var$getFetchedMovies","window","innerWidth","ok","Error","status","results","movieData","error","$d3fe7bef80e36203$var$fetchTrendsMovies","then","addEventListener","e","targetCard","target","localStorage","setItem"],"version":3,"file":"index.48559cf0.js.map"}