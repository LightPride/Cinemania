const e=document.querySelector(".catalog__gallery"),t=document.querySelector(".pas-halka");async function n(n,a){e.innerHTML="";const i=document.createElement("ul");i.classList.add("weekly-list"),e.appendChild(i);const s=n.slice(0,a),d=await Promise.all(s.map((async e=>{const n=await async function(e){const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=ec3ca0e4403710b7fc1497b1dbf32c54&language=en-US"),{genres:n}=await t.json();return e.map((e=>n.find((t=>t.id===e))?.name)).join(", ")}(e.genre_ids),a=e.title.slice(0,e.title.indexOf(":")),i=e.release_date.slice(0,4),s=e.vote_average.toFixed(1),d=document.createElement("li");d.classList.add("weekly-item");const c=document.createElement("div");c.classList.add("weekly-wrapper"),console.log(e.id),c.dataset.id=`${e.id}`;const l=document.createElement("div");l.classList.add("weekly-info");const o=document.createElement("h3");o.classList.add("weekly-info__title"),o.innerText=`${a}`;const r=document.createElement("span");r.classList.add("weekly-info__genres__data"),r.innerText=`${n.split(",").slice(0,1).join(", ")} | ${i}`;const p=document.createElement("div");p.classList.add("weekly-rating");const m=document.createElement("span");m.innerText=`${s}`,p.appendChild(m);const u=document.createElement("div");u.classList.add("catalog-list__additional-info"),u.appendChild(r),u.appendChild(function(e){const n=document.createElement("div");n.classList.add("stars-container");const a=document.createElement("div");a.classList.add("st-gray"),a.classList.add("flex"),a.innerHTML="⭐⭐⭐⭐⭐";const i=document.createElement("div");i.innerHTML="⭐⭐⭐⭐⭐",i.classList.add("st"),i.classList.add("flex"),n.append(a,i),t.appendChild(n);const s=i.offsetHeight;return i.style.width=e/2*s+"px",n}(s)),u.title=s;const g=document.createElement("img");return g.src=`https://image.tmdb.org/t/p/w500${e.poster_path}`,g.alt=`${e.title} movie poster`,g.classList.add("weekly-img"),g.setAttribute("width","500"),l.appendChild(o),l.appendChild(u),c.appendChild(l),d.appendChild(c),d.appendChild(g),d})));i.append(...d)}function a(){const e=window.innerWidth<768?1:3;(async function(){try{const e=await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ec3ca0e4403710b7fc1497b1dbf32c54&language=en-US&page=1");if(!e.ok)throw new Error(e.status);const{results:t}=await e.json();return t}catch(e){console.log(e)}})().then((t=>n(t,e)))}a(),window.addEventListener("resize",a),e.addEventListener("click",(function(e){const t=e.target;localStorage.setItem("film-id",`${t.dataset.id}`),console.log(t.dataset.id)}));
//# sourceMappingURL=index.f94feae7.js.map
