const e={catalogForm:document.querySelector("#search-form"),catalogGallery:document.querySelector(".catalog__gallery")},{catalogForm:t,catalogGallery:a}=e;t.addEventListener("submit",(function(e){e.preventDefault(),inputValue="",page=1;const{catalogSearch:t}=e.currentTarget;if(inputValue=t.value,""===inputValue)return;fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=ec3ca0e4403710b7fc1497b1dbf32c54").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()})).then((e=>{(function(e,t){return fetch(`https://api.themoviedb.org/3/search/movie?api_key=ec3ca0e4403710b7fc1497b1dbf32c54&language=en-US&page=${t}&query=${e}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))})(inputValue,1).then((async t=>{const r=t.results.slice(0,10).map((t=>{const a=t.title,r=`https://image.tmdb.org/t/p/w500${t.poster_path}`,n=t.release_date.substring(0,4),i=t.id,o=t.vote_average;return{title:a,posterPath:r,movieGenres:e.genres.filter((e=>{if(t.genre_ids.includes(e.id))return e})).map((e=>e.name)),releaseYear:n,rating:o,movieId:i}}));a.innerHTML=await function(e){const t=e.map((({title:e,posterPath:t,movieGenres:a,releaseYear:r,rating:n,movieId:i})=>`\n        <li class="movie__card" data-id="${i}">\n        <div class="movie__card-poster" style="background-image: linear-gradient(rgba(0,0,0,0),rgba(0, 0, 0, 0), rgba(0,0,0,1)),\n  url(${t});" data-id="${i}"></div>\n\n        <div class="movie__card-info" data-id="${i}">\n          <h3 data-id="${i}">${e}</h3>\n          <p data-id="${i}"><span data-id="${i}">${a[0]}</span> | <span data-id="${i}">${r}</span></p>\n        </div>\n\n        <div class="movie__card-rating" data-id="${i}">${n}</div>\n      </li> \n        `)).join("");return t}(r)}))}))})),a.addEventListener("click",(function(e){if("UL"===e.target.nodeName)return;const t=e.target;localStorage.setItem("film-id",`${t.dataset.id}`)}));
//# sourceMappingURL=catalog.44b05621.js.map
