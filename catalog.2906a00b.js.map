{"mappings":"AAAA,MAAMA,EAAO,CACXC,YAAaC,SAASC,cAAc,gBACpCC,eAAgBF,SAASC,cAAc,qBACvCE,WAAYH,SAASI,iBAAiB,uBAGlCL,YAAEM,EAAWH,eAAEI,EAAcH,WAAEI,GAAeT,EA2FlDS,EAAW,GAAGC,UAAUC,IAAI,WAvF9BX,EAAKC,YAAYW,iBAAiB,UAElC,SAA6BC,GAC3BA,EAAEC,iBACFC,WAAa,GAEb,MAAMC,cAAEA,GAAkBH,EAAEI,cAI5B,GAFAF,WAAaC,EAAcE,MAER,KAAfH,WACF,OAoDKI,MAAM,0FAAkCC,MAAKC,IAClD,IAAKA,EAAUC,GACb,MAAM,IAAIC,MAAMF,EAAUG,QAG5B,OAAOH,EAAUI,MAAM,IAtDNL,MAAKM,IA8B1B,IAAkCC,KA7BLZ,WAiCpBI,MACL,8HAA0EQ,KAC1EP,MAAKC,IACL,IAAKA,EAAUC,GACb,MAAM,IAAIC,MAAMF,EAAUG,QAG5B,OAAOH,EAAUI,MAAM,KAxCcL,MAAKQ,IACzBA,EAAKC,QAAQC,MAAM,EAAG,IAC9BC,KAAIC,IACT,MAAMC,EAAQD,EAAMC,MACdC,EAAa,kCAAkCF,EAAMG,cACrDC,EAAcJ,EAAMK,aAAaC,UAAU,EAAG,GAC9CC,EAAUP,EAAMQ,GAChBC,EAAST,EAAMU,aAOfC,EAAY,C,MAChBV,E,WACAC,E,YARkBR,EAAOA,OAAOkB,QAAOC,IACvC,GAAIb,EAAMc,UAAUC,SAASF,EAAML,IACjC,OAAOK,EAAMlB,IAAI,I,YAQnBS,E,OACAK,E,QACAF,GAGFS,QAAQC,IAAIN,EAAU,GACtB,GACF,G","sources":["src/js/catalog-search.js"],"sourcesContent":["const refs = {\n  catalogForm: document.querySelector('#search-form'),\n  catalogGallery: document.querySelector('.catalog__gallery'),\n  navigation: document.querySelectorAll('.navigation__link'),\n};\n\nconst { catalogForm, catalogGallery, navigation } = refs;\n\nchangeCurrentNavigation();\n\nrefs.catalogForm.addEventListener('submit', onCatalogFormSubmit);\n\nfunction onCatalogFormSubmit(e) {\n  e.preventDefault();\n  inputValue = '';\n\n  const { catalogSearch } = e.currentTarget;\n\n  inputValue = catalogSearch.value;\n\n  if (inputValue === '') {\n    return;\n  }\n\n  fetchMovieGenres().then(genres => {\n    fetchCatalogSearchMovies(inputValue).then(data => {\n      const movies = data.results.slice(0, 10);\n      movies.map(movie => {\n        const title = movie.title;\n        const posterPath = `https://image.tmdb.org/t/p/w500${movie.poster_path}`;\n        const releaseYear = movie.release_date.substring(0, 4);\n        const movieId = movie.id;\n        const rating = movie.vote_average;\n        const movieGenres = genres.genres.filter(genre => {\n          if (movie.genre_ids.includes(genre.id)) {\n            return genre.name;\n          }\n        });\n\n        const cardsData = {\n          title,\n          posterPath,\n          movieGenres,\n          releaseYear,\n          rating,\n          movieId,\n        };\n\n        console.log(cardsData);\n      });\n    });\n  });\n}\n\nfunction fetchCatalogSearchMovies(name) {\n  const API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\n  const BASE_URL = 'https://api.themoviedb.org/3/search/movie';\n\n  return fetch(\n    `${BASE_URL}?api_key=${API_KEY}&language=en-US&per_page=10&page=1&query=${name}`\n  ).then(movieData => {\n    if (!movieData.ok) {\n      throw new Error(movieData.status);\n    }\n\n    return movieData.json();\n  });\n}\n\nfunction fetchMovieGenres() {\n  const API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\n  const BASE_URL = 'https://api.themoviedb.org/3/genre/movie/list';\n\n  return fetch(`${BASE_URL}?api_key=${API_KEY}`).then(movieData => {\n    if (!movieData.ok) {\n      throw new Error(movieData.status);\n    }\n\n    return movieData.json();\n  });\n}\n\nfunction createGallery(movies) {\n  const generatedHtml = movies\n    .map(({ title, posterPath, movieGenres, releaseYear, rating, movieId }) => {\n      const htmlPart = `\n        // \n        `;\n\n      return htmlPart;\n    })\n    .join('');\n\n  return generatedHtml;\n}\n\nfunction changeCurrentNavigation() {\n  navigation[1].classList.add('current');\n}\n"],"names":["$263db3299b551903$var$refs","catalogForm","document","querySelector","catalogGallery","navigation","querySelectorAll","$263db3299b551903$var$catalogForm","$263db3299b551903$var$catalogGallery","$263db3299b551903$var$navigation","classList","add","addEventListener","e","preventDefault","inputValue","catalogSearch","currentTarget","value","fetch","then","movieData","ok","Error","status","json","genres","name","data","results","slice","map","movie","title","posterPath","poster_path","releaseYear","release_date","substring","movieId","id","rating","vote_average","cardsData","filter","genre","genre_ids","includes","console","log"],"version":3,"file":"catalog.2906a00b.js.map"}