{"mappings":"AACA,MAAMA,EAAO,CACXC,aAAcC,SAASC,eAAe,gBACtCC,gBAAiBF,SAASC,eAAe,mBAGzCE,WAAYH,SAASC,eAAe,cACpCG,SAAUJ,SAASC,eAAe,aAClCI,eAAgBL,SAASM,cAAc,6BACvCC,UAAWP,SAASM,cAAc,uBAClCE,cAAeR,SAASM,cAAc,4BAEtCG,MAAOT,SAASM,cAAc,sBAC9BI,OAAQV,SAASM,cAAc,wBAC/BK,KAAMX,SAASM,cAAc,SAC7BM,MAAOZ,SAASM,cAAc,UAC9BO,QAASb,SAASM,cAAc,eAChCQ,MAAOd,SAASM,cAAc,YAG1BS,EACO,aADPA,EAEI,SAgBV,SAASC,IACPC,IA8BFC,iBACE,IACE,MAAMC,GACJA,EAAEC,YACFA,EAAWC,MACXA,EAAKC,SACLA,EAAQC,WACRA,EAAUC,aACVA,EAAYC,WACZA,EACAC,OAAAC,SAjBGC,MACL,sCAAeC,aAAaC,QAAQ,uDACpCC,MAAKC,GACEA,EAAKC,SAgBZC,EAAef,EACfgB,QAAQC,IAAIF,GAEZpC,EAAKW,MAAM4B,IAAM,mCAAmCjB,IACpDtB,EAAKY,OAAO4B,YAAcjB,EAC1BvB,EAAKa,KAAK2B,YAAcd,EACxB1B,EAAKc,MAAM0B,YAAcb,EACzB3B,EAAKe,QAAQyB,YAAcf,EAC3BY,QAAQC,IAAIT,GACZ7B,EAAKgB,MAAMwB,YAAcX,EAAOY,KAAKb,GAAWA,EAAOc,OAAMC,KAAK,KAClE3C,EAAKU,cAAc8B,YAAchB,C,CAEjC,MAAOoB,GACPP,QAAQC,IAAIM,E,EAtDdC,GACA3C,SAAS4C,KAAKC,UAAUC,OAAO/B,GAC/BhB,aAAa8C,UAAUC,OAAO/B,GAE9BZ,WAAW0C,UAAUC,OAAO/B,E,CAlB9BjB,EAAKI,gBAAgB6C,iBAAiB,QAAS/B,GAC/ClB,EAAKC,aAAagD,iBAAiB,QAAS/B,GAC5ChB,SAAS+C,iBAAiB,WAE1B,UAA+BC,KAACA,IACjB,WAATA,GAAqB7C,WAAW0C,UAAUI,SAASlC,KACrDE,IACAD,I,IAyBJ,IAAIkB,EAyDJ,SAASjB,IACHjB,SAAS4C,KAAKC,UAAUI,SAAS,gBACnCd,QAAQC,IAAI,SACZtC,EAAKK,WAAW0C,UAAUK,IAAI,eAAgB,eAC9CpD,EAAKM,SAASyC,UAAUK,IAAI,eAC5BpD,EAAKS,UAAUsC,UAAUK,IAAI,eAC7BpD,EAAKO,eAAewC,UAAUK,IAAI,cAClCpD,EAAKU,cAAcqC,UAAUK,IAAI,iBAEjCf,QAAQC,IAAI,QACZtC,EAAKK,WAAW0C,UAAUM,OAAO,eAAgB,eACjDrD,EAAKM,SAASyC,UAAUM,OAAO,eAC/BrD,EAAKS,UAAUsC,UAAUM,OAAO,eAChCrD,EAAKO,eAAewC,UAAUM,OAAO,cACrCrD,EAAKU,cAAcqC,UAAUM,OAAO,e,CA9BvCrD,EAAIM,SAAS2C,iBAAiB,SAE/B,WACOjD,EAAKM,SAASyC,UAAUI,SAAS,kBAMpCnD,EAAKM,SAASyC,UAAUM,OAAO,iBAC/BrD,EAAKM,SAASyC,UAAUK,IAAI,OAC5BrB,aAAauB,WAAW,aAAclB,KANtCpC,EAAKM,SAASyC,UAAUK,IAAI,iBAC5BrB,aAAawB,QAAQ,aAAcnB,G","sources":["src/js/mogal-popup.js"],"sourcesContent":["// === MODAL POP UP ===\nconst refs = {\n  overlayPopUp: document.getElementById('overlayPopUp'),\n  closeModalPopUp: document.getElementById('closeModalPopUp'),\n  // openModalPopUp: document.querySelector('.catalog__gallery'),\n  // openModalPopUp: document.getElementById('openModalPopUp'),\n  modalPopUp: document.getElementById('modalPopUp'),\n  btnPopUp: document.getElementById('mylibrary'),\n  closeIconPopUp: document.querySelector('.pop-up-modal__close-icon'),\n  blokPopUp: document.querySelector('.pop-up-modal__blok'),\n  aboutTxtPopUp: document.querySelector('.pop-up-modal__about-txt'),\n\n  image: document.querySelector('.pop-up-modal__img'),\n  titles: document.querySelector('.pop-up-modal__title'),\n  vote: document.querySelector('.vote'),\n  votes: document.querySelector('.votes'),\n  popular: document.querySelector('.popularity'),\n  genre: document.querySelector('.genres'),\n};\n\nconst classes = {\n  openModal: 'open-modal',\n  visual: 'visual',\n};\n// ===== ВИКЛИК МОДАЛКИ =====\n// refs.openModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.closeModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.overlayPopUp.addEventListener('click', handlePopUpModal);\ndocument.addEventListener('keydown', handlePopUpModalClose);\n\nfunction handlePopUpModalClose({code}) {  \n  if (code === 'Escape' && modalPopUp.classList.contains(classes.visual)) {\n    toogleLight();    \n    handlePopUpModal();    \n\n  }\n}\n\nfunction handlePopUpModal() {\n  toogleLight();\n  getPopUpMovies();  \n  document.body.classList.toggle(classes.openModal);\n  overlayPopUp.classList.toggle(classes.visual);\n\n  modalPopUp.classList.toggle(classes.visual);  \n  \n  // localStorage.removeItem('film-id', MYLIBRARY_ID);\n  // localStorage.removeItem('mylbery-id', MYLIBRARY_ID);\n}\n\n// === Тимчасовий пробний запис в localStorage ===\n// localStorage.setItem('film-id', 502356);\n// localStorage.removeItem('film-id');\n// POPUP MOVIES\n\nconst API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\nconst POPUP_URL = `https://api.themoviedb.org/3/movie/`;\n// const POPUP_ID = localStorage.getItem('film-id');\nlet MYLIBRARY_ID;\n// 502356 840326 1008005\n\nfunction fetchPopUpMovies() {\n  return fetch(\n    `${POPUP_URL}${localStorage.getItem('film-id')}?api_key=${API_KEY}`\n  ).then(data => {\n    return data.json();\n  });\n}\n\nasync function getPopUpMovies() {\n  try {\n    const {\n      id,\n      poster_path,\n      title,\n      overview,\n      popularity,\n      vote_average,\n      vote_count,\n      genres,\n    } = await fetchPopUpMovies();\n    MYLIBRARY_ID = id;\n    console.log(MYLIBRARY_ID);\n\n    refs.image.src = `https://image.tmdb.org/t/p/w500/${poster_path}`;      \n    refs.titles.textContent = title;            \n    refs.vote.textContent = vote_average;         \n    refs.votes.textContent = vote_count;      \n    refs.popular.textContent = popularity;    \n    console.log(genres);       \n    refs.genre.textContent = genres.map((genres) => genres.name).join(\" \");   \n    refs.aboutTxtPopUp.textContent = overview;        \n    \n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// === set/remome в localStorage 'mylberyId' ====\nrefs.btnPopUp.addEventListener('click', pushMyLibrary);\n\nfunction pushMyLibrary() {\n  if (!refs.btnPopUp.classList.contains('add_mylibrary')) {\n\n    refs.btnPopUp.classList.add('add_mylibrary');     \n    localStorage.setItem('mylbery-id', MYLIBRARY_ID);    \n    \n  } else {\n    refs.btnPopUp.classList.remove('add_mylibrary');\n    refs.btnPopUp.classList.add('btn');\n    localStorage.removeItem('mylbery-id', MYLIBRARY_ID);\n  }\n}\n\n// ===== Перемикач теми DARK/LIGHT =====\nfunction toogleLight() {   \n  if (document.body.classList.contains('light-theme')) {\n    console.log(\"LIGHT\");\n    refs.modalPopUp.classList.add('light_shadow', 'light_color');  \n    refs.btnPopUp.classList.add('light_color');  \n    refs.blokPopUp.classList.add('light_color');  \n    refs.closeIconPopUp.classList.add('light_fill');   \n    refs.aboutTxtPopUp.classList.add('light_color');  \n } else {\n    console.log(\"DARK\");  \n    refs.modalPopUp.classList.remove('light_shadow', 'light_color');  \n    refs.btnPopUp.classList.remove('light_color');  \n    refs.blokPopUp.classList.remove('light_color');  \n    refs.closeIconPopUp.classList.remove('light_fill');   \n    refs.aboutTxtPopUp.classList.remove('light_color');  \n }\n};\n\n"],"names":["$0c803dbac51014e0$var$refs","overlayPopUp","document","getElementById","closeModalPopUp","modalPopUp","btnPopUp","closeIconPopUp","querySelector","blokPopUp","aboutTxtPopUp","image","titles","vote","votes","popular","genre","$0c803dbac51014e0$var$classes","$0c803dbac51014e0$var$handlePopUpModal","$0c803dbac51014e0$var$toogleLight","async","id","poster_path","title","overview","popularity","vote_average","vote_count","genres","genres1","fetch","localStorage","getItem","then","data","json","$0c803dbac51014e0$var$MYLIBRARY_ID","console","log","src","textContent","map","name","join","error","$0c803dbac51014e0$var$getPopUpMovies","body","classList","toggle","addEventListener","code","contains","add","remove","removeItem","setItem"],"version":3,"file":"library.2cd9f8ac.js.map"}