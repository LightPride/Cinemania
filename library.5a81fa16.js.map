{"mappings":"AAAA,MAAMA,EAAO,CACXC,YAAaC,SAASC,cAAc,iBACpCC,gBAAiBF,SAASG,eAAe,aACzCC,YAAaJ,SAASG,eAAe,gBACrCE,eAAgBL,SAASC,cAAc,qBACvCK,SAAUN,SAASC,cAAc,aACjCM,SAAUP,SAASC,cAAc,eAGnCH,EAAKO,eAAeG,iBAAiB,SAiErC,SAA+BC,GAC7B,GAA0B,OAAtBA,EAAEC,OAAOC,SACX,OAGF,MAAMC,EAAaH,EAAEC,OAErBG,aAAaC,QAAQ,UAAW,GAAGF,EAAWG,QAAQC,K,IAtExD,MAAMC,EAAgBJ,aAAaK,QAAQ,gBAErCC,EADiBC,KAAKC,MAAMJ,GACFK,SAKhC,IAAuBC,EAqBvB,SAASC,GAAcC,MACrBA,EAAKC,YACLA,EAAWC,aACXA,EAAYC,aACZA,EAAYC,OACZA,EAAMb,GACNA,IAEA,IAAKa,EAAO,GACV,OAuBF,MAnBiB,8CACwBb,gLAEHU,iBAA2BV,+DAElBA,+BACxBA,MAAOS,iCACRT,qBAAsBA,MAT9Ba,EAAO,GAAGC,gCAS4Dd,MAAOW,EAAaI,UACtG,EACA,qFAI+Cf,MAmBnD,SAA0BgB,GACxB,MAAMC,EAAiBjC,SAASkC,cAAc,OAC9CD,EAAeE,UAAUC,IAAI,mBAC7B,MAAMC,EAAYrC,SAASkC,cAAc,OACzCG,EAAUF,UAAUC,IAAI,WACxBC,EAAUF,UAAUC,IAAI,QACxBC,EAAUC,UAAY,QACZ,MAAJC,EAAYvC,SAASkC,cAAc,OACzCK,EAAUD,UAAY,QACtBC,EAAUJ,UAAUC,IAAI,MACxBG,EAAUJ,UAAUC,IAAI,QACxBH,EAAeO,OAAOH,EAAWE,GACjCzC,EAAKS,SAASkC,YAAYR,GAC1B,MAAMS,EAASH,EAAUI,aACzBJ,EAAUK,MAAMC,MAAWb,EAAU,EAAKU,EAAlB,KAGxB,OAD4BT,EAAea,S,CAnCaC,CACtDnB,kC,CAhDmBL,EAmBTJ,EAlBZrB,EAAKO,eAAeiC,UAAY,GAChCf,EAAMyB,KAAIhC,KAWZ,SAA0BA,GACxB,OAAOiC,MAAM,sCAAejC,8CAAyBkC,MAAKC,GACjDA,EAAKC,Q,EAZZC,CAAiBrC,GAAIkC,MAAKI,MAAMH,IACzB3B,EAAc2B,KAGnBrD,EAAKQ,SAASgC,UAAY,GAC1BxC,EAAKO,eAAekD,mBAAmB,YAAa/B,EAAc2B,IAAM,GACxE","sources":["src/js/localstorage.js"],"sourcesContent":["const refs = {\n  upcomingBtn: document.querySelector('#upcoming_btn'),\n  addToLibraryBtn: document.getElementById('mylibrary'),\n  libraryList: document.getElementById('library_list'),\n  catalogGallery: document.querySelector('.catalog__gallery'),\n  anyMovis: document.querySelector('.anyMovis'),\n  pashalka: document.querySelector('.pas-halka'),\n};\n\nrefs.catalogGallery.addEventListener('click', onCatalogGalleryClick);\n\nconst savedSettings = localStorage.getItem('myLibraryIds');\nconst parsedSettings = JSON.parse(savedSettings);\nconst filmsIds = parsedSettings.idsArray;\n\nconst API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\nconst POPUP_URL = `https://api.themoviedb.org/3/movie/`;\n\nfunction renderLibrary(array) {\n  refs.catalogGallery.innerHTML = '';\n  array.map(id => {\n    fetchPopUpMovies(id).then(async data => {\n      if (!createGallery(data)) {\n        return;\n      }\n      refs.anyMovis.innerHTML = '';\n      refs.catalogGallery.insertAdjacentHTML('beforeend', createGallery(data));\n    });\n  });\n}\n\nfunction fetchPopUpMovies(id) {\n  return fetch(`${POPUP_URL}${id}?api_key=${API_KEY}`).then(data => {\n    return data.json();\n  });\n}\n\nrenderLibrary(filmsIds);\n\nfunction createGallery({\n  title,\n  poster_path,\n  release_date,\n  vote_average,\n  genres,\n  id,\n}) {\n  if (!genres[0]) {\n    return;\n  }\n  const genre = genres[0].name;\n  // console.log(genre);\n  const htmlPart = `\n        <li class=\"movie__card\" data-id=\"${id}\">\n        <div class=\"movie__card-poster\" style=\"background-image: linear-gradient(rgba(0,0,0,0),rgba(0, 0, 0, 0), rgba(0,0,0,1)),\n  url(https://image.tmdb.org/t/p/w500/${poster_path});\" data-id=\"${id}\"></div>\n\n        <div class=\"movie__card-info\" data-id=\"${id}\">\n          <h3 data-id=\"${id}\">${title}</h3>\n          <p data-id=\"${id}\"><span data-id=\"${id}\">${genre}</span> | <span data-id=\"${id}\">${release_date.substring(\n    0,\n    4\n  )}</span></p>\n        </div>\n\n        <div class=\"movie__card-rating\" data-id=\"${id}\">${createStarRating(\n    vote_average\n  )}</div>\n      </li> \n        `;\n\n  return htmlPart;\n}\n\nfunction onCatalogGalleryClick(e) {\n  if (e.target.nodeName === 'UL') {\n    return;\n  }\n\n  const targetCard = e.target;\n\n  localStorage.setItem('film-id', `${targetCard.dataset.id}`);\n}\n\nfunction createStarRating(rating) {\n  const starsContainer = document.createElement('div');\n  starsContainer.classList.add('stars-container');\n  const grayStars = document.createElement('div');\n  grayStars.classList.add('st-gray');\n  grayStars.classList.add('flex');\n  grayStars.innerHTML = '⭐⭐⭐⭐⭐';\n  const fullStars = document.createElement('div');\n  fullStars.innerHTML = '⭐⭐⭐⭐⭐';\n  fullStars.classList.add('st');\n  fullStars.classList.add('flex');\n  starsContainer.append(grayStars, fullStars);\n  refs.pashalka.appendChild(starsContainer);\n  const height = fullStars.offsetHeight;\n  fullStars.style.width = `${(rating / 2) * height}px`;\n\n  const innerStarsContainer = starsContainer.outerHTML;\n  return innerStarsContainer;\n}\n"],"names":["$89a4baeedb6cdec9$var$refs","upcomingBtn","document","querySelector","addToLibraryBtn","getElementById","libraryList","catalogGallery","anyMovis","pashalka","addEventListener","e","target","nodeName","targetCard","localStorage","setItem","dataset","id","$89a4baeedb6cdec9$var$savedSettings","getItem","$89a4baeedb6cdec9$var$filmsIds","JSON","parse","idsArray","array","$89a4baeedb6cdec9$var$createGallery","title","poster_path","release_date","vote_average","genres","name","substring","rating","starsContainer","createElement","classList","add","grayStars","innerHTML","fullStars","append","appendChild","height","offsetHeight","style","width","outerHTML","$89a4baeedb6cdec9$var$createStarRating","map","fetch","then","data","json","$89a4baeedb6cdec9$var$fetchPopUpMovies","async","insertAdjacentHTML"],"version":3,"file":"library.5a81fa16.js.map"}