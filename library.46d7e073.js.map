{"mappings":"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","sources":["src/js/mogal-popup.js"],"sourcesContent":["// === MODAL POP UP ===\nif (!localStorage.getItem('myLibraryIds')) {\n  const emptyArray = {\n    idsArray: [],\n  };\n  localStorage.setItem('myLibraryIds', JSON.stringify(emptyArray));\n}\n\n// localStorage.removeItem('myLibraryIds');\n\nconst refs = {\n  overlayPopUp: document.getElementById('overlayPopUp'),\n  closeModalPopUp: document.getElementById('closeModalPopUp'),\n  openModalPopUp: document.querySelector('.catalog__gallery'),\n  // openModalPopUp: document.getElementById('openModalPopUp'),\n  modalPopUp: document.getElementById('modalPopUp'),\n  btnPopUp: document.getElementById('mylibrary'),\n  closeIconPopUp: document.querySelector('.pop-up-modal__close-icon'),\n  blokPopUp: document.querySelector('.pop-up-modal__blok'),\n  aboutTxtPopUp: document.querySelector('.pop-up-modal__about-txt'),\n\n  image: document.querySelector('.pop-up-modal__img'),\n  titles: document.querySelector('.pop-up-modal__title'),\n  vote: document.querySelector('.vote'),\n  votes: document.querySelector('.votes'),\n  popular: document.querySelector('.popularity'),\n  genre: document.querySelector('.genres'),\n};\n\nconst classes = {\n  openModal: 'open-modal',\n  visual: 'visual',\n};\n// ===== ВИКЛИК МОДАЛКИ =====\nrefs.openModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.closeModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.overlayPopUp.addEventListener('click', handlePopUpModal);\ndocument.addEventListener('keydown', handlePopUpModalClose);\nrefs.btnPopUp.addEventListener('click', () => {\n  if (refs.btnPopUp.textContent === 'Add to my library') {\n    refs.btnPopUp.textContent = 'Remove from my library';\n  } else {\n    refs.btnPopUp.textContent = 'Add to my library';\n  }\n});\n\nif (!refs.openModalPopUp) {\n} else {\n  refs.openModalPopUp.addEventListener('click', handlePopUpModal);\n}\n// refs.openModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.closeModalPopUp.addEventListener('click', handlePopUpModal);\nrefs.overlayPopUp.addEventListener('click', handlePopUpModal);\ndocument.addEventListener('keydown', handlePopUpModalClose);\n\nfunction handlePopUpModalClose({ code }) {\n  if (code === 'Escape' && modalPopUp.classList.contains(classes.visual)) {\n    toogleLight();\n    handlePopUpModal();\n  }\n}\n\nfunction handlePopUpModal() {\n\n  \n\n  setTimeout(() => {\n    toogleLight();\n    getPopUpMovies();\n    document.body.classList.toggle(classes.openModal);\n    overlayPopUp.classList.toggle(classes.visual);\n    document.body.classList.toggle('modal-open');\n    modalPopUp.classList.toggle(classes.visual);\n  }, 0);\n\n\n  // localStorage.removeItem('film-id', MYLIBRARY_ID);\n  // localStorage.removeItem('mylbery-id', MYLIBRARY_ID);\n}\n\n// === Тимчасовий пробний запис в localStorage ===\n// localStorage.setItem('film-id', 502356);\n// localStorage.removeItem('film-id');\n// POPUP MOVIES\n\nconst API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\nconst POPUP_URL = `https://api.themoviedb.org/3/movie/`;\n// const POPUP_ID = localStorage.getItem('film-id');\nlet MYLIBRARY_ID;\n// 502356 840326 1008005\n\nfunction fetchPopUpMovies() {\n  return fetch(\n    `${POPUP_URL}${localStorage.getItem('film-id')}?api_key=${API_KEY}`\n  ).then(data => {\n    return data.json();\n  });\n}\n\nasync function getPopUpMovies() {\n  try {\n    const {\n      id,\n      poster_path,\n      title,\n      overview,\n      popularity,\n      vote_average,\n      vote_count,\n      genres,\n    } = await fetchPopUpMovies();\n    MYLIBRARY_ID = id;\n    // console.log(MYLIBRARY_ID);\n\n    refs.image.src = `https://image.tmdb.org/t/p/w500/${poster_path}`;\n    refs.titles.textContent = title;\n    refs.vote.textContent = vote_average;\n    refs.votes.textContent = vote_count;\n    refs.popular.textContent = popularity;\n    // console.log(genres);\n    refs.genre.textContent = genres.map(genres => genres.name).join(' ');\n    refs.aboutTxtPopUp.textContent = overview;\n\n    const savedSettings = localStorage.getItem('myLibraryIds');\n    const parsedSettings = JSON.parse(savedSettings);\n\n    if (parsedSettings.idsArray.includes(MYLIBRARY_ID)) {\n      refs.btnPopUp.textContent = 'Remove from my library';\n    } else {\n      refs.btnPopUp.textContent = 'Add to my library';\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// === set/remome в localStorage 'mylberyId' ====\nrefs.btnPopUp.addEventListener('click', pushMyLibrary);\n\nfunction pushMyLibrary() {\n  // if (!refs.btnPopUp.classList.contains('add_mylibrary')) {\n  //   refs.btnPopUp.classList.add('add_mylibrary');\n  //   localStorage.setItem('mylbery-id', MYLIBRARY_ID);\n  // } else {\n  //   refs.btnPopUp.classList.remove('add_mylibrary');\n  //   refs.btnPopUp.classList.add('btn');\n  //   localStorage.removeItem('mylbery-id', MYLIBRARY_ID);\n  // }\n  const savedSettings = localStorage.getItem('myLibraryIds');\n  const parsedSettings = JSON.parse(savedSettings);\n\n  if (parsedSettings.idsArray.includes(MYLIBRARY_ID)) {\n    const idIndex = parsedSettings.idsArray.indexOf(MYLIBRARY_ID);\n\n    parsedSettings.idsArray.splice(idIndex, 1);\n\n    localStorage.setItem('myLibraryIds', `${JSON.stringify(parsedSettings)}`);\n\n    return;\n  }\n\n  parsedSettings.idsArray.push(MYLIBRARY_ID);\n\n  localStorage.setItem('myLibraryIds', `${JSON.stringify(parsedSettings)}`);\n}\n\n// ===== Перемикач теми DARK/LIGHT =====\nfunction toogleLight() {\n  if (document.body.classList.contains('light-theme')) {\n    // console.log('LIGHT');\n    refs.modalPopUp.classList.add('light_shadow', 'light_color');\n    refs.btnPopUp.classList.add('light_color');\n    refs.blokPopUp.classList.add('light_color');\n    refs.closeIconPopUp.classList.add('light_fill');\n    refs.aboutTxtPopUp.classList.add('light_color');\n  } else {\n    // console.log('DARK');\n    refs.modalPopUp.classList.remove('light_shadow', 'light_color');\n    refs.btnPopUp.classList.remove('light_color');\n    refs.blokPopUp.classList.remove('light_color');\n    refs.closeIconPopUp.classList.remove('light_fill');\n    refs.aboutTxtPopUp.classList.remove('light_color');\n  }\n}\n"],"names":["localStorage","getItem","emptyArray","idsArray","setItem","JSON","stringify","$0c803dbac51014e0$var$refs","overlayPopUp","document","getElementById","closeModalPopUp","openModalPopUp","querySelector","modalPopUp","btnPopUp","closeIconPopUp","blokPopUp","aboutTxtPopUp","image","titles","vote","votes","popular","genre","$0c803dbac51014e0$var$classes","$0c803dbac51014e0$var$handlePopUpModalClose","code","classList","contains","$0c803dbac51014e0$var$toogleLight","$0c803dbac51014e0$var$handlePopUpModal","setTimeout","async","id","poster_path","title","overview","popularity","vote_average","vote_count","genres","genres1","fetch","then","data","json","$0c803dbac51014e0$var$MYLIBRARY_ID","src","textContent","map","name","join","savedSettings","parse","includes","error","console","log","$0c803dbac51014e0$var$getPopUpMovies","body","toggle","addEventListener","add","remove","parsedSettings","idIndex","indexOf","splice","push"],"version":3,"file":"library.46d7e073.js.map"}