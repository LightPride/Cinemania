{"mappings":"iiBAAA,IAgBuBA,EAhBvBC,EAAAC,EAAA,S,aAAMC,EAAO,CACXC,YAAaC,SAASC,cAAc,iBACpCC,gBAAiBF,SAASG,eAAe,aACzCC,YAAaJ,SAASG,eAAe,gBACrCE,eAAgBL,SAASC,cAAc,sBAKnCK,EAAgBC,aAAaC,QAAQ,gBAErCC,EADiBC,KAAKC,MAAML,GACFM,SAE1BC,EAAU,mCACVC,EAAa,sCAsBnB,SAASC,EAAcC,G,IAAEC,EAAFD,EAAEC,MAAOC,EAATF,EAASE,YAAaC,EAAtBH,EAAsBG,aAAcC,EAApCJ,EAAoCI,aAAcC,EAAlDL,EAAkDK,OACvE,GAAIA,EAAO,GAAX,CAGA,IAAMC,EAAQD,EAAO,GAAGE,KAgBxB,MAdiB,+MAMHC,OAHwBN,EAAY,wEAI/BM,OADLP,EAAM,8BACuBO,OAAxBF,EAAM,oBAGeE,OAHGL,EAAaM,UAAU,EAAG,GAAG,2EAGnBD,OAAbJ,EAAa,iCAdnD,C,CAtBmBzB,EAkBTc,EAjBZX,EAAKO,eAAeqB,UAAY,GAChC/B,EAAMgC,KAAI,SAAAC,GACiB,I,GAS7B,SAA0BA,GACxB,OAAOC,MAAM,GAAeL,OAAZV,GAA0BU,OAAdI,EAAG,aAAmBJ,OAARX,IAAWiB,MAAK,SAAAC,GACxD,OAAOA,EAAKC,M,KAXZC,CAAiBL,GAAIE,M,EAAKI,EAAAtC,EAAA,CAAAsC,EAAAC,GAAAC,MAAA,SAAAC,EAAMN,G,qEAC1BhB,EAAcgB,GAAK,C,gDAGvBjC,EAAKO,eAAeiC,mBAAmB,YAAavB,EAAcgB,I,oDAJpCA,G","sources":["src/js/localstorage.js"],"sourcesContent":["const refs = {\n  upcomingBtn: document.querySelector('#upcoming_btn'),\n  addToLibraryBtn: document.getElementById('mylibrary'),\n  libraryList: document.getElementById('library_list'),\n  catalogGallery: document.querySelector('.catalog__gallery'),\n};\n\n\n\nconst savedSettings = localStorage.getItem('myLibraryIds');\nconst parsedSettings = JSON.parse(savedSettings);\nconst filmsIds = parsedSettings.idsArray;\n\nconst API_KEY = 'ec3ca0e4403710b7fc1497b1dbf32c54';\nconst POPUP_URL = `https://api.themoviedb.org/3/movie/`;\n\nfunction renderLibrary(array) {\n  refs.catalogGallery.innerHTML = \"\";\n  array.map(id => {\n    fetchPopUpMovies(id).then(async data => {\n      if(!createGallery(data)) {\n        return;\n      }\n      refs.catalogGallery.insertAdjacentHTML('beforeend', createGallery(data));\n    });\n  });\n}\n\nfunction fetchPopUpMovies(id) {\n  return fetch(`${POPUP_URL}${id}?api_key=${API_KEY}`).then(data => {\n    return data.json();\n  });\n}\n\nrenderLibrary(filmsIds);\n\nfunction createGallery({ title, poster_path, release_date, vote_average, genres }) {\n  if(!genres[0]) {\n    return;\n  }\n  const genre = genres[0].name;\n  // console.log(genre);\n  const htmlPart = `\n        <li class=\"movie__card\">\n        <div class=\"movie__card-poster\" style=\"background-image: linear-gradient(rgba(0,0,0,0),rgba(0, 0, 0, 0), rgba(0,0,0,1)),\n  url(https://image.tmdb.org/t/p/w500/${poster_path});\"></div>\n\n        <div class=\"movie__card-info\">\n          <h3>${title}</h3>\n          <p><span>${genre}</span> | <span>${release_date.substring(0, 4)}</span></p>\n        </div>\n\n        <div class=\"movie__card-rating\">${vote_average}</div>\n      </li> \n        `;\n\n  return htmlPart;\n}\n\n// function onAddToLibraryBtnClick (e) {\n//     console.log('click on add to library btn');\n//     let array = [];\n\n//     fetchFilmById().then(data => {\n//         const movies = {\n//           title: data.title,\n//           posterPath: data.poster_path,\n//           genres: data.genres,\n//           releaseYear: data.release_date,\n//           id: data.id,\n//           voteAverage: data.vote_average,\n//         }\n\n//         console.log(movies); // Вывести объект фильма в консоль\n\n//       //   for(const movie in movies) {\n//       //     console.log(\n//       //       `\n//       //       <li class=\"movie__card\" data-id=\"${movie.id}\">\n//       //       <div class=\"movie__card-poster\" style=\"background-image: linear-gradient(rgba(0,0,0,0),rgba(0, 0, 0, 0), rgba(0,0,0,1)),\n//       // url(${movie.poster_path});\" data-id=\"${movie.id}\"></div>\n\n//       //       <div class=\"movie__card-info\" data-id=\"${movie.id}\">\n//       //         <h3 data-id=\"${movie.id}\">${movie.title}</h3>\n//       //         <p data-id=\"${movie.id}\"><span data-id=\"${movie.id}\">${movie.genres}</span> | <span data-id=\"${movie.id}\">${movie.release_date}</span></p>\n//       //       </div>\n\n//       //       <div class=\"movie__card-rating\" data-id=\"${movie.id}\">${movie.vote_average}</div>\n//       //     </li>\n\n//       //       `\n//       //     )\n//       //   }\n\n//       });\n\n// }\n\n// function fetchFilmById() {\n//     return fetch(`${POPUP_URL}${localStorage.getItem('mylbery-id')}?api_key=${API_KEY}`)\n//     .then(data => {\n//       return data.json()\n//     })\n//   }\n\n// fetchFilmById().then(console.log)\n"],"names":["array","$bpxeT","parcelRequire","$50116558f77987dc$var$refs","upcomingBtn","document","querySelector","addToLibraryBtn","getElementById","libraryList","catalogGallery","$50116558f77987dc$var$savedSettings","localStorage","getItem","$50116558f77987dc$var$filmsIds","JSON","parse","idsArray","$50116558f77987dc$var$API_KEY","$50116558f77987dc$var$POPUP_URL","$50116558f77987dc$var$createGallery","param","title","poster_path","release_date","vote_average","genres","genre","name","concat","substring","innerHTML","map","id","fetch","then","data","json","$50116558f77987dc$var$fetchPopUpMovies","$parcel$interopDefault","$2TvXO","mark","_callee","insertAdjacentHTML"],"version":3,"file":"library.4dd0c050.js.map"}