const e={catalogForm:document.querySelector("#search-form"),catalogGallery:document.querySelector(".catalog__gallery")},{catalogForm:t,catalogGallery:a}=e;let n=1;function r(){i().then((e=>{var t;(t=n,fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=ec3ca0e4403710b7fc1497b1dbf32c54&language=en-US&page=${t}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((async t=>{const n=t.results.slice(0,10).map((t=>{const a=t.title,n=`https://image.tmdb.org/t/p/w500${t.poster_path}`,r=t.release_date.substring(0,4),i=t.id,s=t.vote_average;return{title:a,posterPath:n,movieGenres:e.genres.filter((e=>{if(t.genre_ids.includes(e.id))return e})).map((e=>e.name)),releaseYear:r,rating:s,movieId:i}}));a.innerHTML=await s(n)}))}))}function i(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=ec3ca0e4403710b7fc1497b1dbf32c54").then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))}function s(e){return e.map((({title:e,posterPath:t,movieGenres:a,releaseYear:n,rating:r,movieId:i})=>{const s=`\n        <li class="movie__card" data-id="${i}">\n        <div class="movie__card-poster" style="background-image: linear-gradient(rgba(0,0,0,0),rgba(0, 0, 0, 0), rgba(0,0,0,1)),\n  url(${t});" data-id="${i}"></div>\n\n        <div class="movie__card-info" data-id="${i}">\n          <h3 data-id="${i}">${e}</h3>\n          <p data-id="${i}"><span data-id="${i}">${a[0]}</span> | <span data-id="${i}">${n}</span></p>\n        </div>\n\n        <div class="movie__card-rating" data-id="${i}">${function(e){const t=document.createElement("div");t.classList.add("stars-container");const a=document.createElement("div");a.classList.add("st-gray"),a.classList.add("flex"),a.innerHTML="⭐⭐⭐⭐⭐";const n=document.createElement("div");n.innerHTML="⭐⭐⭐⭐⭐",n.classList.add("st"),n.classList.add("flex"),t.append(a,n),document.body.appendChild(t);const r=n.offsetHeight;n.style.width=e/2*r+"px";return t.outerHTML}(r)}</div>\n      </li> \n        `;return s})).join("")}t.addEventListener("submit",(function(e){e.preventDefault(),inputValue="",n=1;const{catalogSearch:t}=e.currentTarget;if(inputValue=t.value,""===inputValue)return void r();i().then((e=>{var t,r;(t=inputValue,r=n,fetch(`https://api.themoviedb.org/3/search/movie?api_key=ec3ca0e4403710b7fc1497b1dbf32c54&language=en-US&page=${r}&query=${t}`).then((e=>{if(!e.ok)throw new Error(e.status);return e.json()}))).then((async t=>{const n=t.results.slice(0,10).map((t=>{const a=t.title,n=`https://image.tmdb.org/t/p/w500${t.poster_path}`,r=t.release_date.substring(0,4),i=t.id,s=t.vote_average;return{title:a,posterPath:n,movieGenres:e.genres.filter((e=>{if(t.genre_ids.includes(e.id))return e})).map((e=>e.name)),releaseYear:r,rating:s,movieId:i}}));a.innerHTML=await s(n)}))}))})),a.addEventListener("click",(function(e){if("UL"===e.target.nodeName)return;const t=e.target;localStorage.setItem("film-id",`${t.dataset.id}`)})),r();
//# sourceMappingURL=catalog.b8622d55.js.map
